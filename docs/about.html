<!DOCTYPE html>
<html lang="en">
<head>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fjalla+One&family=Knewave&family=Libre+Franklin:ital,wght@0,100..900;1,100..900&family=Londrina+Solid:wght@100;300;400;900&family=Pathway+Gothic+One&family=Permanent+Marker&display=swap" rel="stylesheet">
  <title>GRIN</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pathway+Gothic+One&display=swap" rel="stylesheet">
</head>
  <body>
      <header>
    <h1>
      <a href="index.html">
        <img src="GrinLogo.png" alt="GRIN" style="width: 500px; height:auto;">
      </a>
    </h1>
    <div class="nav-center">
      <button class="nav-toggle" aria-label="Open menu" style="display:none;">&#9776;</button>
      <nav>
        <a href="index.html">Home</a>
        <a href="about.html">About</a>
        <a href="issues.html">Issues</a>
        <a href="my_library.html">My Library</a>
        <span id="nav-auth"></span>
      </nav>
    </div>
      </header>

    <main>
    <script>
      // Mobile nav toggle
      const navToggle = document.querySelector('.nav-toggle');
      const nav = document.querySelector('nav');
      function checkMobile() {
        if (window.innerWidth <= 700) {
          navToggle.style.display = 'block';
          nav.classList.remove('open');
        } else {
          navToggle.style.display = 'none';
          nav.classList.remove('open');
        }
      }
      navToggle.addEventListener('click', () => {
        nav.classList.toggle('open');
      });
      window.addEventListener('resize', checkMobile);
      document.addEventListener('DOMContentLoaded', checkMobile);
    </script>
  <h2 class="headings">About GRIN Magazine</h2>
  <div style="max-width: 800px; width: 100%; margin: 0 auto; font-family: 'Libre Franklin', 'Arial', sans-serif; font-size: 1em;">
      <p>GRIN Magazine was founded in a Chicago parent's basement. Yes, really, and we're here to share art and music we fuck with. We showcase various scenes both locally and around the globe.
      GRIN covers all things heavy music, Chicago recs, playlists, artist spotlights, and more, all wrapped up with those little grinning guys you’re likely to see
       on a USPS sticker somewhere around the city. Cause sometimes you gotta put on a shit-eating grin just to get through the day. So take a break from the doom and
      gloom of this world and indulge with us.
      </p>
      <p>
      Wanna get in touch? Contact us at
      <a href="mailto:grinmagazinechi@gmail.com" style="color:#e63946;text-decoration:underline;">grinmagazinechi@gmail.com</a>
      or follow us on social media
      <a href="https://www.instagram.com/grin.zine?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" target="_blank" style="vertical-align:middle;">
  <img src="insta-btn-bw.png" alt="Instagram" style="width:28px;height:28px;border-radius:6px;margin-left:6px;">
      </a>
      </p>
    </div>
        </div>
    </main>



  </body>

  <footer>
  <script>
    // Show login/signup or logged-in message with email and dropdown for logout
    async function updateNavAuth() {
      const API_BASE_URL = window.location.hostname === "localhost"
        ? "http://localhost:4242"
  : "https://api.grinzine.com";
      try {
        const res = await fetch(`${API_BASE_URL}/auth/my-library`, { credentials: "include" });
        if (res.ok) {
          const data = await res.json();
          if (data.email) {
            document.getElementById("nav-auth").innerHTML = `
              <div style="display:inline-block;position:relative;">
                <span id="user-email" style="cursor:pointer;font-family:'Londrina Solid',sans-serif;">Logged in as ${data.email} ▼</span>
                <div id="logout-dropdown" style="display:none;position:absolute;right:0;background:#fff;color:#333;border:1px solid #ccc;z-index:1000;min-width:120px;font-family:'Londrina Solid',sans-serif;">
                  <button id="logout-btn" style="width:100%;padding:8px;border:none;background:none;cursor:pointer;font-family:'Londrina Solid',sans-serif;">Logout</button>
                </div>
              </div>
            `;
            document.getElementById("user-email").onclick = function(e) {
              e.stopPropagation();
              const dd = document.getElementById("logout-dropdown");
              dd.style.display = dd.style.display === "block" ? "none" : "block";
            };
            document.getElementById("logout-btn").onclick = async function(e) {
              e.stopPropagation();
              await csrfFetch(`${API_BASE_URL}/auth/logout`, { method: "POST" });
              window.location.href = "login.html";
            };
            document.addEventListener("click", function(e) {
              const dd = document.getElementById("logout-dropdown");
              if (dd && dd.style.display === "block") {
                if (!e.target.closest("#logout-dropdown") && !e.target.closest("#user-email")) {
                  dd.style.display = "none";
                }
              }
            });
          } else {
            document.getElementById("nav-auth").textContent = `Logged in`;
          }
        } else {
          throw new Error();
        }
      } catch {
  document.getElementById("nav-auth").innerHTML = `<button class='default-btn' style='font-family: \"Londrina Solid\", sans-serif;' onclick=\"window.location.href='login.html'\">Login / Signup</button>`;
      }
    }
    updateNavAuth();

    // Auto-logout after inactivity (30 minutes)
    let logoutTimer;
    function resetLogoutTimer() {
      clearTimeout(logoutTimer);
      logoutTimer = setTimeout(async () => {
        const API_BASE_URL = window.location.hostname === "localhost"
          ? "http://localhost:4242"
          : "https://api.grinzine.com";
        await csrfFetch(`${API_BASE_URL}/auth/logout`, { method: "POST" });
        window.location.href = "login.html";
      }, 30 * 60 * 1000); // 30 minutes
    }
    ["mousemove", "keydown", "click", "scroll", "touchstart"].forEach(evt => {
      window.addEventListener(evt, resetLogoutTimer);
    });
    resetLogoutTimer();
  </script>
    <p>
      <a href="privacy.html" style="color:#e63946;text-decoration:underline;margin-right:18px;">Privacy Policy</a>
      <a href="terms.html" style="color:#e63946;text-decoration:underline;margin-right:18px;">Terms & Conditions</a>
      <span style="color:#222;">|</span> © 2025 GRIN • For the minds of the disturbed
    </p>
  </footer>
</body>
</html>
